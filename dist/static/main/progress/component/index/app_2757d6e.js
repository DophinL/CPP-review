define("main/progress/component/index/app",["require","exports","module","component/ZXTable/index","component/QueryDepart/index","component/regularui/Popover/index","component/BaseComponent/index","component/regularui/pager/index"],function(e,t,n){e("component/ZXTable/index"),e("component/QueryDepart/index");var p=e("component/regularui/Popover/index"),i=e("component/BaseComponent/index"),m=i.util,o=i.extend({template:'<div class="index" r-hide="status !== \'index\'">\n    <queryDepart type="2" ref="queryDepart" on-search={this.search($event)} />\n\n    <z-xtable config={tableConfig}>\n        <xtable_cols>\n            <col width="6.5%"/>\n            <col width="6.5%"/>\n            <col width="12%"/>\n            <col width="10%"/>\n            <col width="6.5%"/>\n            <col width="6.5%"/>\n            <col width="6.5%"/>\n            <col width="16%"/>\n            <col width="10%"/>\n            <col width="6.5%"/>\n            <col width="8%"/>\n            <col/>\n        </xtable_cols>\n        <xtable_hd>\n            <tr>\n                <th>工号</th>\n                <th>姓名</th>\n                <th>职位名称</th>\n                <th>所属部门</th>\n                <th>现级别</th>\n                <th>拟调整级别</th>\n                <th>调整属性</th>\n                <th>拟调整职位类别</th>\n                <th>评审方式</th>\n                <th>评审结果</th>\n                <th>最新状态</th>\n                <th>详情</th>\n            </tr>\n        </xtable_hd>\n        <xtable_bd>\n            {#list items as item}\n            <item on-jump={this.jump($event)} item={item}></item>\n            {/list}\n        </xtable_bd>\n    </z-xtable>\n\n    <pager total={totalPages} on-nav={this.nav($event)}></pager>\n</div>\n\n<!--详情页面-->\n<!--{#if status === \'detail\'}\n<div class="detail">\n    <detail empId={detail.empId} on-goback={this.goback()}></detail>\n</div>\n{/if}-->\n',config:function(e){var t={status:"index",items:[],currentPage:1,totalPages:1,detail:{},tableConfig:{}};m.extend(e,t)},init:function(){var e=this;this.$refs.queryDepart.search(),window.onhashchange=function(){var t=location.hash;t?"#detail"===t&&e.$update("status","detail"):e.$update("status","index")}},search:function(e){var t=this,n={};e.empId&&(n.empId=e.empId),e.empName&&(n.empName=e.empName),n.deptId=e.deptId,n.flag="progress",n.currentPage=this.data.currentPage,this.data.tableConfig.status="loading",this.$request({url:"/nom/getEmpList.do",method:"GET",data:n,dataType:"json",success:function(e){function n(e){for(var t=[],n=0;n<e.length;n++)t[n]={},t[n].empId=e[n].empId,t[n].empName=e[n].empName,t[n].deptName=e[n].deptName,t[n].pPositionName=e[n].pPositionName,t[n].mPositionName=e[n].mPositionName,t[n].pLevelNow=e[n].pLevel,t[n].mLevelNow=e[n].mLevel,t[n].postL1NameNew=e[n].empUpInfo&&e[n].empUpInfo.postL1NameNew,t[n].postL2NameNew=e[n].empUpInfo&&e[n].empUpInfo.postL2NameNew,t[n].postL3NameNew=e[n].empUpInfo&&e[n].empUpInfo.postL3NameNew,t[n].pLevelNew=e[n].empUpInfo&&e[n].empUpInfo.lineP&&e[n].empUpInfo.lineP.levelNew,t[n].mLevelNew=e[n].empUpInfo&&e[n].empUpInfo.lineM&&e[n].empUpInfo.lineM.levelNew,t[n].pLevelAdjust=e[n].empUpInfo&&e[n].empUpInfo.lineP&&e[n].empUpInfo.lineP.levelAdjust,t[n].mLevelAdjust=e[n].empUpInfo&&e[n].empUpInfo.lineM&&e[n].empUpInfo.lineM.levelAdjust,t[n].pUpType=e[n].empUpInfo&&e[n].empUpInfo.lineP&&e[n].empUpInfo.lineP.upType,t[n].mUpType=e[n].empUpInfo&&e[n].empUpInfo.lineM&&e[n].empUpInfo.lineM.upType,t[n].pReviewType=e[n].empUpInfo&&e[n].empUpInfo.lineP&&e[n].empUpInfo.lineP.reviewType,t[n].mReviewType=e[n].empUpInfo&&e[n].empUpInfo.lineM&&e[n].empUpInfo.lineM.reviewType,t[n].pResult1St=e[n].empUpInfo&&e[n].empUpInfo.lineP&&e[n].empUpInfo.lineP.result1St,t[n].pResult2nd=e[n].empUpInfo&&e[n].empUpInfo.lineP&&e[n].empUpInfo.lineP.result2nd,t[n].mResult1St=e[n].empUpInfo&&e[n].empUpInfo.lineM&&e[n].empUpInfo.lineM.result1St,t[n].mResult2nd=e[n].empUpInfo&&e[n].empUpInfo.lineM&&e[n].empUpInfo.lineM.result2nd,t[n].pResult=e[n].empUpInfo&&e[n].empUpInfo.lineP&&e[n].empUpInfo.lineP.result,t[n].mResult=e[n].empUpInfo&&e[n].empUpInfo.lineM&&e[n].empUpInfo.lineM.result;return t}var p=e.data.data&&e.data.data.length,i="",m=p?n(e.data.data):[];i=p?"normal":"empty",t.$update({"tableConfig.status":i,"tableConfig.items":m,items:m,totalPages:e.data.totalPages})},error:function(e){t.data.tableConfig.status={type:"error",code:e.code,msg:e.msg}}})},nav:function(e){this.data.currentPage=e,this.$refs.queryDepart.search()},jump:function(e){this.data.detail={empId:e.empId},this.data.status="detail"},goback:function(){history.go(-1)}}),a=i.extend({template:"<tr>\n    <td>{item.empId}</td>\n    <td>{item.empName}</td>\n    <td>{item.pPositionName}{item.pPositionName && item.mPositionName?' / ':''}{item.mPositionName}</td>\n    <td>{item.deptName}</td>\n    <td>{item.pLevelNow}{item.pLevelNow && item.mLevelNow?' / ':''}{item.mLevelNow}</td>\n    <td>{item.pLevelNew}{item.pLevelNew && item.mLevelNew?' / ':''}{item.mLevelNew}</td>\n    <td>{item.pUpType}{item.pUpType && item.mUpType?' / ':''}{item.mUpType}</td>\n    <td>{item.postL1NameNew}{item.postL1NameNew && item.postL2NameNew?' > ':''}{item.postL2NameNew}{item.postL2NameNew && item.postL3NameNew?' > ':''}{item.postL3NameNew}</td>\n    <td>\n        {item.pReviewType==1?'初审':(item.pReviewType==2?'答辩':(item.pReviewType==3?'内部评审':(item.pReviewType==4?'任职HR直接给结果':'')))} {item.pReviewType && item.mReviewType?' / ':''} {item.mReviewType==1?'初审':(item.mReviewType==2?'答辩':(item.mReviewType==3?'内部评审':(item.mReviewType==4?'任职HR直接给结果':'')))}\n    </td>\n    <td>\n        {#if item.pResult1St || item.pResult2nd}\n        <p>\n            <span on-mouseenter={this.popover(item.pResult2nd==3,$event,item.pLevelNow,item.pLevelAdjust)}>\n                {#if item.pResult2nd}\n                {item.pResult2nd==1?'通过':(item.pResult2nd==2?'不通过':(item.pResult2nd==3?'调整':''))}\n                {#else}\n                {item.pResult1St==1?'通过':(item.pResult1St==2?'不通过':(item.pResult1St==3?'答辩':''))}\n                {/if}\n            </span>\n        </p>\n        {/if}\n        {#if item.mResult1St || item.mResult2nd}\n        <p>\n            <span on-mouseenter={this.popover(item.mResult2nd==3,$event,item.mLevelNow,item.mLevelAdjust)}>\n                {#if item.mResult2nd}\n                {item.mResult2nd==1?'通过':(item.mResult2nd==2?'不通过':(item.mResult2nd==3?'调整':''))}\n                {#else}\n                {item.mResult1St==1?'通过':(item.mResult1St==2?'不通过':(item.mResult1St==3?'答辩':''))}\n                {/if}\n            </span>\n        </p>\n        {/if}\n    </td>\n    <td>{item.pResult}{item.pResult && item.mResult?' / ':''}{item.mResult}</td>\n    <td><a href=\"#detail\" on-click={this.jump()}>查看</a></td>\n</tr>",popover:function(e,t,n,i){e&&new p({data:{"class":"m-popover-s",content:'<p><span style="color: orange;font-weight:700">调整前:</span>'+n+'</p><p><span style="color: orange;font-weight:700">调整后:</span>'+i+"</p>"}}).$inject(t.target)},jump:function(){this.$emit("jump",this.data.item)}});o.component("item",a),o.component("pager",e("component/regularui/pager/index")),n.exports=o});