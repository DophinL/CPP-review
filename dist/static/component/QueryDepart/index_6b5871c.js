define("component/QueryDepart/index",["require","exports","module","component/BaseComponent/index"],function(t,e,a){var n=t("component/BaseComponent/index"),s=n.util;!function(){var t="";n.event("enter",function(e,a){function s(n){var s=e.value;13==n.which&&t!==s&&(n.preventDefault(),a(n)),t=s}var d=n.dom;return d.on(e,"keypress",s),function(){d.off(e,"keypress",s)}})}();var d=n.extend({name:"queryDepart",template:'<div class="query-wrap">\n    <label>所属部门:</label>\n    <xSelect data="1" ref="depart1" on-select={this.select($event)}>请选择一级部门</xSelect>\n    <xSelect data="2" ref="depart2" on-select={this.select($event)}>请选择二级部门</xSelect>\n    <xSelect data="3" ref="depart3" on-select={this.select($event)}>请选择三级部门</xSelect>\n    <div class="select-input {type==2?\'f-rt\':\'\'}">\n        <select r-model={option}>\n            <option value="empId">工号</option>\n            <option value="empName">姓名</option>\n        </select>\n        <input on-enter={this.search()} r-model={text} class="search" type="text"/>\n        <span class="icon_search" on-click={this.search()}></span>\n    </div>\n</div>',config:function(t){var e={nowDeptId:"",option:"empId",text:"",type:1};s.extend(t,e)},init:function(){var t=this;this.$request({url:"/dept/getUserDeptList.do",method:"GET",data:{depth:1},dataType:"json",success:function(e){for(var a=[],n=0;n<e.data.length;n++)a.push(s.extend({text:e.data[n].deptName},e.data[n]));t.$refs.depart1.$update("items",a)}})},select:function(t){for(var e=["depart1","depart2","depart3"],a=this.$refs[e[t.data]],n=t.data-0;n<e.length;n++)this.$refs[e[n]].clear();if(t.deptId)this.data.nowDeptId=t.deptId,"3"!=t.data&&this.$request({url:"/dept/getUserDeptList.do",method:"GET",data:{parentId:t.deptId},dataType:"json",success:function(t){for(var e=[],n=0;n<t.data.length;n++)e.push(s.extend({text:t.data[n].deptName},t.data[n]));a.$update("items",e)}});else if("1"==t.data)this.data.nowDeptId=void 0;else{var d=this.$refs[e[t.data-2]];this.data.nowDeptId=d.data.value.deptId}this.$emit("select",t),this.search()},search:function(){var t={};this.data.nowDeptId&&(t.deptId=this.data.nowDeptId),this.data.text&&(t[this.data.option]=this.data.text),this.$emit("search",t)}}),i=n.extend({template:"<select on-change={this.select($event)}><option>{#include this.$body}</option>{#list items as item}<option value={item_index}>{item.text}</option>{/list}</select>",config:function(t){var e={items:[],data:null,value:{}};s.extend(t,e)},select:function(t){this.data.value=s.extend({data:this.data.data},this.data.items[t.target.value]),this.$emit("select",this.data.value)},clear:function(){this.data.items=[],this.data.value={}}});d.component("xSelect",i),a.exports=d});